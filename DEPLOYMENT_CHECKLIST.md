# Render Deployment Checklist

## ‚úÖ Pre-Deployment Setup (Completed)

- [x] `.env` file configured for local development
- [x] `render.yaml` configured for all environments (dev, staging, production)
- [x] `runtime.txt` created (Python 3.9.16)
- [x] `Procfile` configured with gunicorn
- [x] `requirements.txt` has all dependencies
- [x] `.gitignore` properly configured
- [x] `.env.example` created as template
- [x] Database name configurable via `DB_NAME` environment variable
- [x] All Python scripts use `DB_NAME` from environment
- [x] JWT algorithm configurable
- [x] MAIL_USE_TLS configurable from environment

## üìã Deployment Steps

### Step 1: Push to GitHub/GitLab

```bash
git add .
git commit -m "Configure for Render deployment"
git push origin main
```

### Step 2: Create Render Account

- Go to https://render.com
- Sign up or log in
- Connect your GitHub/GitLab account

### Step 3: Deploy Using Blueprint (render.yaml)

1. **In Render Dashboard:**

   - Click "New +" ‚Üí "Blueprint"
   - Select your repository
   - Render will detect `render.yaml`
   - Click "Apply"

2. **Set Required Environment Variables:**

   For each service (dev, staging, production), set:

   ‚úÖ **Required:**

   - `MONGO_URI` - Your MongoDB connection string
   - `FRONTEND_URL` - Your frontend URL

   ‚ö†Ô∏è **Optional (for email):**

   - `MAIL_USERNAME` - Your Gmail address
   - `MAIL_PASSWORD` - Gmail app password
   - `MAIL_DEFAULT_SENDER` - Email to send from

   üîë **Auto-generated by Render:**

   - `JWT_SECRET_KEY` - Automatically created
   - `PORT` - Automatically set

### Step 4: MongoDB Atlas Configuration

1. **Whitelist Render IPs:**

   - Go to MongoDB Atlas ‚Üí Network Access
   - Click "Add IP Address"
   - Add `0.0.0.0/0` (allow all)
   - Or use Render's specific IP ranges

2. **Get Connection String:**

   - MongoDB Atlas ‚Üí Database ‚Üí Connect
   - Choose "Connect your application"
   - Copy connection string
   - Replace `<password>` with your actual password
   - Ensure database name is included

3. **Create Database User:**
   - Ensure user has read/write permissions
   - Note username and password for connection string

### Step 5: Gmail Configuration (Optional)

For email functionality:

1. **Enable 2-Factor Authentication:**

   - Google Account ‚Üí Security ‚Üí 2-Step Verification

2. **Generate App Password:**
   - Google Account ‚Üí Security ‚Üí App passwords
   - Select "Mail" and your device
   - Copy the 16-character password
   - Use this as `MAIL_PASSWORD`

### Step 6: Verify Deployment

1. **Check Build Logs:**

   - Render Dashboard ‚Üí Your Service ‚Üí Logs
   - Verify no errors during build

2. **Test Health Endpoint:**

   ```bash
   curl https://your-service.onrender.com/api/health
   ```

   Expected response:

   ```json
   {
     "success": true,
     "status": "healthy",
     "environment": "production",
     "database": "connected"
   }
   ```

3. **Create Admin User:**
   - Run `create_admin.py` locally with production `MONGO_URI`
   - Or use the registration endpoint

### Step 7: Update Frontend

Update your frontend to use the new backend URLs:

- Dev: `https://outre-couture-backend-dev.onrender.com/api`
- Staging: `https://outre-couture-backend-staging.onrender.com/api`
- Production: `https://outre-couture-backend-prod.onrender.com/api`

## üîç Troubleshooting

### Build Fails

- Check `requirements.txt` has all dependencies
- Verify Python version in `runtime.txt`
- Check build logs in Render Dashboard

### Database Connection Fails

- Verify `MONGO_URI` is correct
- Check MongoDB Atlas Network Access whitelist
- Ensure database user has proper permissions
- Verify database name in connection string

### CORS Errors

- Set `FRONTEND_URL` in Render environment variables
- Ensure frontend URL matches exactly (no trailing slash)
- Check app allows your frontend domain

### Email Not Sending

- Verify Gmail app password is correct
- Check 2FA is enabled on Google account
- Ensure all email env vars are set
- Check Render logs for email errors

### Cold Start Delays

- Free tier spins down after 15 minutes
- First request takes 30-60 seconds
- Consider upgrading to paid plan

## üìä Monitoring

### Check Application Status

- Render Dashboard ‚Üí Services ‚Üí Status
- View real-time logs
- Monitor CPU and memory usage

### Database Monitoring

- MongoDB Atlas ‚Üí Metrics
- Check connection count
- Monitor query performance

## üöÄ Post-Deployment

### Security

- [ ] Change `JWT_SECRET_KEY` from default (auto-generated by Render)
- [ ] Review MongoDB Network Access rules
- [ ] Enable HTTPS (automatic with Render)
- [ ] Set up proper CORS origins
- [ ] Review security headers

### Performance

- [ ] Consider upgrading from free tier
- [ ] Set up database indexes
- [ ] Enable MongoDB query optimization
- [ ] Monitor response times

### Maintenance

- [ ] Set up automated backups for MongoDB
- [ ] Document environment variables
- [ ] Create monitoring alerts
- [ ] Plan regular security updates

## üìù Important URLs

### Render Dashboard

https://dashboard.render.com

### MongoDB Atlas

https://cloud.mongodb.com

### Your Services (after deployment)

- Dev: https://outre-couture-backend-dev.onrender.com
- Staging: https://outre-couture-backend-staging.onrender.com
- Production: https://outre-couture-backend-prod.onrender.com

## üÜò Support Resources

- Render Docs: https://render.com/docs
- MongoDB Atlas Docs: https://docs.atlas.mongodb.com
- Flask Docs: https://flask.palletsprojects.com
- Gunicorn Docs: https://docs.gunicorn.org

---

**Note:** Keep this checklist updated as you deploy and configure your services!
